---
layout: post
title: ä½è¿ç®—çš„å¼ºå¤§
subtitle: ä½è¿ç®—åˆ°åº•æ€ä¹ˆå®ç°å®ƒçš„ä»·å€¼
date: 2023-03-06
author: My
header-img: img/post-bg-e2e-ux.jpg
catalog: true
tags:
  - åŸºç¡€
  - javascript
---

ä½è¿ç®—ï¼Œé»˜é»˜æ— é—»è€Œä¸è¢«äººå…³æ³¨ï¼Œä½†å´åœ¨ js å¼€å‘ä¸­å‘æŒ¥ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚

### ä»€ä¹ˆæ˜¯ä½è¿ç®—

ä½è¿ç®—çš„æ‰§è¡Œæ•ˆç‡æ˜¯éå¸¸å¿«çš„ï¼Œèƒ½ç»™æˆ‘ä»¬çš„å¼€å‘å¸¦æ¥å¾ˆå¤šæ–¹ä¾¿ã€‚
ä½è¿ç®—ï¼š**æŒ‡çš„æ˜¯å°†ä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶æ ¼å¼è¿›è¡Œè¿ç®—**ã€‚JS ä¸­ï¼Œå¦‚æœå¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œä½è¿ç®—ï¼Œå®ƒé¦–å…ˆä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ï¼ˆæŠ¹æ‰å°æ•°ï¼‰ï¼Œ å¹¶ä¸”æŒ‰ç…§ 32 ä½çš„æ•´æ•°äºŒè¿›åˆ¶è¿›è¡Œæ’åˆ—ã€‚

```js
2.3 -> 2 -> 0000 0000 0000 0000 0000 0000 0000 0010
NaN -> 0
Infinity -> 0
-Infinity -> 0
```

### ä½ä¸è¿ç®— `&`

å†™æ³•ï¼š`æ•°1` & `æ•°2`ï¼› å°†ä¸¤ä¸ªæ•´æ•°çš„æ¯ä¸€ä½è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœéƒ½ä¸º `1` ,åˆ™ç»“æœä¸º `1` ï¼Œå¦åˆ™ç»“æœä¸º `0` ã€‚ ä¾‹å¦‚ï¼š

```js
// 1: 0000 0000 0000 0000 0000 0000 0000 0001
// 2: 0000 0000 0000 0000 0000 0000 0000 0010
// ä¸€ä½ä¸€ä½åœ°è¿›è¡Œæ¯”è¾ƒ
// result: 0000 0000 0000 0000 0000 0000 0000 0000
console.log(1 & 2); //0

// 2:10
// 3:11
console.log(2 & 3); //10 -> 2

// 2:010
// 4:100
console.log(2 & 4); //000 -> 0
```

### ä½æˆ–è¿ç®— `|`

å†™æ³•ï¼š `æ•°1` | `æ•°2`ï¼› å°†ä¸¤ä¸ªæ•´æ•°çš„æ¯ä¸€ä½è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœéƒ½ä¸º `0` ,åˆ™ç»“æœä¸º `0` ï¼Œå¦åˆ™ç»“æœä¸º `1` ã€‚ ä¾‹å¦‚ï¼š

```js
// 1: 0000 0000 0000 0000 0000 0000 0000 0001
// 2: 0000 0000 0000 0000 0000 0000 0000 0010
// ä¸€ä½ä¸€ä½åœ°è¿›è¡Œæ¯”è¾ƒ
// result: 0000 0000 0000 0000 0000 0000 0000 0011
console.log(1 | 2); //11 -> 3

// 2:10
// 3:11
console.log(2 | 3); //11 -> 3

// 2:010
// 4:100
console.log(2 | 4); //110 -> 6
```

### ä½éè¿ç®— ~

å†™æ³•ï¼š`~æ•°` ï¼›å°†è¯¥æ•´æ•°æŒ‰ä½å–åï¼Œå°±æ˜¯ `1` å˜ä¸º `0` , `0` å˜ä¸º `1` ã€‚

ä¾‹å¦‚ï¼š`-1`

```js
// è´Ÿæ•°ï¼Œç¬¬ä¸€ä½ï¼Œå³ç¬¦å·ä½ä¸º1ï¼Œåˆ™ä¸ºè´Ÿæ•°ã€‚
çœŸç ï¼š1000 0000 0000 0000 0000 0000 0000 0001
åç ï¼š1111 1111 1111 1111 1111 1111 1111 1110 //çœŸç å–å
è¡¥ç ï¼š1111 1111 1111 1111 1111 1111 1111 1111 //åç åŠ 1 è®¡ç®—æœºçš„æœ€ç»ˆå‚¨å­˜

```

ä¾‹å¦‚ï¼š`~1`

```js
1: 0000 0000 0000 0000 0000 0000 0000 0001
åç ï¼š1111 1111 1111 1111 1111 1111 1111 1101 //å–åå¹¶å‡1

å¾—åˆ°åç åï¼Œ1å˜0ï¸ï¼Œ0å˜1

console.log(~1); // -2

```

å–åå¿«é€Ÿè¿ç®—ï¼š-å–åçš„æ•°å­— -1ï¼›ä¾‹å¦‚ï¼Œ~2,å³-2 - 2= -3;~-2,å³-(-2) - 1 = 1ã€‚

å¿«é€Ÿå–åï¼š

```js
console.log(~~4.434155); //4
```

### å¼‚æˆ–è¿ç®— `^`

å†™æ³•ï¼š`æ•°1` ^ `æ•°2`ï¼›å°†ä¸¤ä¸ªæ•´æ•°æŒ‰ä½è¿›è¡Œæ¯”è¾ƒï¼Œä¸åŒå– `1` ,ç›¸åŒå– `0` ã€‚ ä¾‹å¦‚ï¼š

```js
1: 01
2: 10
console.log(1^2); // 11 -> 3
```

**ç‚«æŠ€äº¤æ¢å˜é‡:**

```js
let a = 2;
let b = 4;
a = a ^ b;
b = a ^ b;
a = a ^ b;
console.log("a,b", a, b); // 4 2
```

### åº”ç”¨åœºæ™¯

ä½çš„å åŠ ï¼ˆä½çš„å¼€å…³ï¼‰ã€‚

æƒé™é…ç½®ï¼š

```js
// ä½¿ç”¨ 2 çš„å€æ•°
const permission = {
  read: 1, //è¯»æƒé™
  edit: 2, //ç¼–è¾‘ï¼ˆä¿®æ”¹ï¼‰æƒé™
  create: 4, //åˆ›å»ºæƒé™
};

// ç”¨ äºŒè¿›åˆ¶ æ¥è¡¨ç¤º
const permission = {
  read: 0b0001,
  edit: 0b0010,
  create: 0b0100,
};
```

æƒé™åˆ¤æ–­ï¼š

```js
// ä¿å­˜å¯è¯» å¯å†™
const p = permission.read | permission.edit; // 011 -> 3;
//åˆ¤æ–­æƒé™ p æ˜¯æœ‰ å¯è¯»æƒé™
const res = p & (permission.read === permission.read) ? "å¯è¯»" : "ä¸å¯è¯»";
console.log("res", res); // å¯è¯»

// ä¿å­˜å¯åˆ›å»º å¯å†™
const g = permission.create | permission.edit; // 110 -> 6
//åˆ¤æ–­æƒé™ g æ˜¯æœ‰ å¯è¯»æƒé™
const res1 = g & (permission.read === permission.read) ? "å¯è¯»" : "ä¸å¯è¯»";
console.log("res1", res1); //ä¸å¯è¯»
```

å»æ‰æƒé™ï¼š

```js
// ä¿å­˜å¯è¯» å¯å†™
let p = permission.read | permission.edit; // 011 -> 3

//å»æ‰æƒé™
p = (p | permission.read) ^ permission.read;

//åˆ¤æ–­æƒé™ p æ˜¯æœ‰ å¯è¯»æƒé™
const res = (p & permission.read) === permission.read ? "å¯è¯»" : "ä¸å¯è¯»";
console.log("res", res); // ä¸å¯è¯»
```

### ä½ç§»è¿ç®—

- å·¦ä½ç§» `<<`
  å†™æ³•ï¼š`æ•°1` << `æ•°2`ï¼›å°†æ•°å­— 1 çš„äºŒè¿›åˆ¶ï¼ˆé™¤ç¬¦å·ä½å¤–ï¼‰ï¼Œå‘å·¦ç§»åŠ¨æ•°å­— 2 çš„æ¬¡æ•° ä¾‹å¦‚ï¼š

```js
 console.log("3 << 1", 3 << 1); // 0011 -> 0110 -> 6;

 ç»“è®ºï¼š
 // f = x << y
 // f = x * 2^y
```

- å³ä½ç§»: `>>`
  å†™æ³•ï¼š`æ•°1` >> `æ•°2`ï¼›å°†æ•°å­— 1 çš„äºŒè¿›åˆ¶ï¼ˆé™¤ç¬¦å·ä½å¤–ï¼‰ï¼Œå‘å³ç§»åŠ¨æ•°å­— 2 çš„æ¬¡æ•° ä¾‹å¦‚ï¼š

```js
 console.log("3 >> 1", 3 >> 1); // 0011 -> 0001 -> 1;

 ç»“è®ºï¼š
 // f = x >> y
 // f = Math.floor(x/2*y)
 // é™¤ä»¥2çš„yæ¬¡æ–¹ï¼Œç„¶åå‘ä¸‹å–æ•´

```

ç»†èŠ‚è¿˜æ˜¯æŒºå¤šçš„ï¼Œå¤šä½¿ç”¨å°±ç†Ÿäº† ğŸ˜„
